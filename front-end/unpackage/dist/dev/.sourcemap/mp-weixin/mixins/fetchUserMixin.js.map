{"version":3,"file":"fetchUserMixin.js","sources":["mixins/fetchUserMixin.js"],"sourcesContent":["export default {\n  methods: {\n    fetchUserInfo() {\n      const username = this.$globalData.username;\n      wx.cloud.callContainer({\n        config: {\n          env: 'prod-7glwxii4e6eb93d8'\n        },\n        path: `/getInfo?id=${encodeURIComponent(username)}`,\n        header: {\n          'X-WX-SERVICE': 'userinfo',\n          'content-type': 'application/json'\n        },\n        method: 'GET',\n        success: (res) => {\n          if (res.data) {\n            this.$globalData.name = res.data.name || '';\n            this.$globalData.gender = res.data.gender || '';\n            this.$globalData.contact_information = res.data.contact_information || '';\n            this.$globalData.belong_information = res.data.belong_information || [];\n            this.$globalData.manage_information = res.data.manage_information || [];\n            this.$globalData.belong_name = res.data.belong_name || [];\n            this.$globalData.manage_name = res.data.manage_name || [];\n          } else {\n            uni.showToast({ title: '获取用户信息失败', icon: 'none' });\n          }\n        },\n        fail: (err) => {\n          console.error('请求失败:', err);\n          uni.showToast({ title: '网络异常，请稍后重试', icon: 'none', duration: 1000 });\n        }\n      });\n    }\n  },\n  onPullDownRefresh() {\n    this.fetchUserInfo();\n    setTimeout(() => {\n      uni.stopPullDownRefresh();\n    }, 500);\n  }\n}\n"],"names":["wx","uni"],"mappings":";;AAAA,MAAe,iBAAA;AAAA,EACb,SAAS;AAAA,IACP,gBAAgB;AACd,YAAM,WAAW,KAAK,YAAY;AAClCA,oBAAE,KAAC,MAAM,cAAc;AAAA,QACrB,QAAQ;AAAA,UACN,KAAK;AAAA,QACN;AAAA,QACD,MAAM,eAAe,mBAAmB,QAAQ,CAAC;AAAA,QACjD,QAAQ;AAAA,UACN,gBAAgB;AAAA,UAChB,gBAAgB;AAAA,QACjB;AAAA,QACD,QAAQ;AAAA,QACR,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,MAAM;AACZ,iBAAK,YAAY,OAAO,IAAI,KAAK,QAAQ;AACzC,iBAAK,YAAY,SAAS,IAAI,KAAK,UAAU;AAC7C,iBAAK,YAAY,sBAAsB,IAAI,KAAK,uBAAuB;AACvE,iBAAK,YAAY,qBAAqB,IAAI,KAAK,sBAAsB;AACrE,iBAAK,YAAY,qBAAqB,IAAI,KAAK,sBAAsB;AACrE,iBAAK,YAAY,cAAc,IAAI,KAAK,eAAe;AACvD,iBAAK,YAAY,cAAc,IAAI,KAAK,eAAe;UACnE,OAAiB;AACLC,0BAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,OAAM,CAAE;AAAA,UAClD;AAAA,QACF;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAc,MAAA,MAAA,SAAA,kCAAA,SAAS,GAAG;AAC1BA,8BAAI,UAAU,EAAE,OAAO,cAAc,MAAM,QAAQ,UAAU,IAAI,CAAE;AAAA,QACpE;AAAA,MACT,CAAO;AAAA,IACF;AAAA,EACF;AAAA,EACD,oBAAoB;AAClB,SAAK,cAAa;AAClB,eAAW,MAAM;AACfA,oBAAG,MAAC,oBAAmB;AAAA,IACxB,GAAE,GAAG;AAAA,EACP;AACH;;"}